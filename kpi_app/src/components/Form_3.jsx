import React ,{useState}from "react";
  const behaviorData = [
    {c_id:1,
      c_title:"1.ให้ความสำคัญกับคุณภาพงาน (Quality Focus)",
      categories: [
        {
          id: 1,
          title: "ระดับ 1: ต้องการทำงานให้ถูกต้องและชัดเจน",
          subItems: [
            {
              id: "1.1",
              text: " ปฏิบัติตามมาตรฐานหรือขั้นตอนการปฏิบัติงานที่รับผิดชอบได้อย่างถูกต้อง และมีประสิทธิภาพ"
              
            },
            {
              id: "1.2",
              text: "ตั้งใจทำงานให้ถูกต้อง สะอาดเรียบร้อย รวมทั้งละเอียดถี่ถ้วนในการปฏิบัติตามขั้นตอนการปฏิบัติงาน กฎ ระเบียบที่วางไว้"
            },
            {
              id: "1.3",
              text: "ตรวจสอบความถูกต้องเรียบร้อยและครบถ้วนของงานอย่างสม่ำเสมอ รวมถึงดำเนินการแก้ไขหากมีข้อผิดพลาด"
            },
            {
              id: "1.4",
              text: "ตระหนักถึงผลเสียที่อาจจะเกิดขึ้นกับตนเองหรือหน่วยงาน จากความผิดพลาดในการปฏิบัติงานของตน"
            }
          ]
        },
        {
          id: 2,
          title: "2.แสดงความสามารถระดับคู่ 1 และตรวจสอบความถูกต้องของงานที่รับผิดชอบไม่ให้เกิดข้อผิดพลาด",
          subItems: [
            {
              id: "2.1",
              text: "ตรวจทานความถูกต้องของงานอย่างละเอียดรอบคอบเพื่อให้งานมีความถูกต้องสูงสุด"
            },
            {
              id: "2.2",
              text: "ปฏิบัติงานโดยไม่มีข้อผิดพลาดเดิมหรือลดข้อผิดพลาดที่เคยเกิดขึ้นแล้วจากความไม่ตั้งใจ"
            },
            {
              id: "2.3",
              text: "ปฏิบัติงานในสถานการณ์กดดันและเร่งรัดด้วยความรอบคอบและได้ผลงานถูกต้องมีประสิทธิภาพ"
            }
          ]
        },
        {
          id: 3,
          title: "3.แสดงความสามารถระดับที่ 2 และดูแลความถูกต้องของงานทั้งของตนและผู้อื่น (ที่อยู่ในความรับผิดชอบของตน หรือช่วยเหลือเพื่อนร่วมงาน)",
          subItems: [
            {
              id: "3.1",
              text: "สังเกตติดตามและระบุผลกระทบจากงานอื่นๆ ที่มีผลต่อคุณภาพของงานในความรับผิดชอบได้อย่างสมบูรณ์ถูกต้อง"
            },
            {
              id: "3.2",
              text: "เสนอแนวทางหรือปรับปรุงคุณภาพของงานที่ได้รับมอบหมายหรืองานของบุคคลอื่นๆ ให้ดียิ่งขึ้น"
            },
            {
              id: "3.3",
              text: "ตรวจสอบความถูกต้องโดยรวมของงานผู้อื่นที่มีผลต่อคุณภาพของหน่วยงานตน โดยอิงมาตรฐานการปฏิบัติงาน หรือกฎระเบียบที่เกี่ยวข้อง"
            },
            {
              id: "3.4",
              text: "ให้คำแนะนำผู้ที่เกี่ยวข้องในการปฏิบัติงานได้ถูกต้องตรงตามขั้นตอนและมาตรฐานที่กำหนดไว้"
            }
          ]
        },
        {
          id: 4,
          title: "4.แสดงความสามารถระดับที่ 3 และวางแผนกำกับตรวจสอบขั้นตอนการปฏิบัติงานโดยละเอียดเพื่อป้องกันไม่ให้เกิดผลกระทบต่อคุณภาพงาน",
          subItems: [
            {
              id: "4.1",
              text: "ตรวจสอบว่าผู้อื่นปฏิบัติตามขั้นตอนการทำงานที่วางไว้ รวมถึงให้คำชี้แนะให้ผู้อื่นปฏิบัติงานให้มีคุณภาพตรงหรือดีกว่ามาตรฐานหรือเป้าหมายที่กำหนดไว้"
            },
            {
              id: "4.2",
              text: "กำหนดแนวทาง มาตรการ และตรวจสอบความก้าวหน้า ความถูกต้องและคุณภาพของผลลัพธ์ของโครงการหรือกิจกรรมที่ได้มอบหมายไว้"
            },
            {
              id: "4.3",
              text: "วิเคราะห์ คาดการณ์ผลลัพธ์และความเสี่ยงที่อาจขึ้น เพื่อหาทางป้องกันความเสี่ยงไม่ให้มีผลกระทบต่อคุณภาพของงาน"
            }
          ]
        },
        {
          id: 5,
          title: "5.แสดงความสามารถระดับที่ 4 และสร้างระบบหรือกระบวนการใหม่ๆ ที่เสริมสร้างและพัฒนาคุณภาพของงานในบริษัท",
          subItems: [
            {
              id: "5.1",
              text: "สร้างระบบและวิธีการที่สามารถกำกับตรวจสอบความก้าวหน้า ความถูกต้องและคุณภาพของผลงานหรือขั้นตอนในการปฏิบัติงานของตนเองและผู้อื่น หรือหน่วยงานอื่นได้อย่างสม่ำเสมอ"
            },
            {
              id: "5.2",
              text: "ติดตามความก้าวหน้าในมาตรฐานคุณภาพงานหรือวิทยาการทันสมัยที่สามารถนำมาประยุกต์ใช้เพื่อพัฒนาคุณภาพงานของหน่วยงานหรือบริษัทในภาพรวมได้"
            },
            {
              id: "5.3",
              text: "กำหนดและส่งเสริมมาตรการประกันคุณภาพเพื่อสร้างความเป็นเลิศของผลงาน และมาตรการในการยกระดับมาตรฐานคุณภาพงานให้เป็นที่ยอมรับทั้งบริษัท"
            }
          ]
        }
      ]
    },
    {c_id:2,
      c_title:"2.ให้ความสำคัญกับผู้รับบริการ / (Customer Focus)ทั้งภายในและภายนอก",
      categories: [
      {
        id: 1,
        title: "ระดับ 1: แสดงความเต็มใจในการให้บริการและสามารถให้บริการที่ผู้รับบริการ/ลูกค้าต้องการได้",
        subItem : [
          {
            id: "1.1",
            text:"รับฟังปัญหาและข้อขัดข้อง รวมถึงให้บริการด้วยอัธยาศัยไมตรีอันดี มีมารยาทและสร้างความประทับใจแก่ผู้รับบริการ"
          },
          {
            id: "1.2",
            text:"ให้คำแนะนำ คอยติดตามเรื่อง และตอบสนองความต้องการของผู้รับบริการได้อย่างถูกต้องและทันท่วงที"
          },
          {
            id: "1.3",
            text:"ให้บริการอย่างเท่าเทียม ไม่เลือกปฏิบัติ โดยยึดถือนโยบาย ระเบียบคำสั่งของบริษัทฯ เป็นสำคัญ"
          },
          {
            id: "1.4",
            text:"ประสานงานภายในหน่วยงาน และกับหน่วยงานที่เกี่ยวข้อง เพื่อให้ผู้รับบริการได้รับบริการที่ต่อเนื่องและรวดเร็ว"
          }
        ]
      },
      {
        id: 2,
        title: "ระดับ 2: แสดงความสามารถระดับที่ 1 และเต็มใจช่วยแก้ปัญหาให้กับผู้บริการได้",
        subItem : [
          {
            id: "2.1",
            text:"เอาใจใส่ และรับเป็นธุระ ช่วยแก้ปัญหาหรือหาแนวทางแก้ไขปัญหาที่เกิดขึ้นแก่ผู้รับบริการอย่างรวดเร็ว เต็มใจ ไม่บ่ายเบี่ยง ไม่แก้ตัว หรือปัดภาระ"
          },
          {
            id: "2.2",
            text:"ติดตามและคอยดูแลให้ผู้รับบริการได้รับความพึงพอใจ และนำข้อขัดข้องใดๆ ในการให้บริการ (ถ้ามี) ไปพัฒนาการให้บริการให้ดียิ่งขึ้น"
          },
          {
            id: "2.3",
            text:"ตอบสนองผู้รับบริการในเชิงสร้างสรรค์แม้ว่าอยู่ในสถานการณ์ที่ตึงเครียดหรือได้รับการปฏิบัติที่ไม่ดีจากผู้รับบริการ"
          },
          {
            id: "2.4",
            text:"แก้ไขปัญหาเฉพาะหน้าหรือข้อขัดแย้งในการให้บริการได้อย่างมีประสิทธิภาพ"
          }
        ]
      },
      {
        id: 3,
        title: "ระดับ 3: แสดงความสามารถระดับที่ 2 และให้บริการที่เกินความคาดหวังในระดับทั่วไป แม้ต้องใช้เวลาหรือความพยายามอย่างมาก",
        subItem : [
          {
            id: "3.1",
            text:"ให้เวลาและความพยายามพิเศษในการให้บริการโดยเฉพาะเมื่อผู้รับบริการประสบความยากลำบากหรือเกิดปัญหาความทุกข์ใจอย่างรุนแรง เพื่อช่วยผู้รับบริการแก้ปัญหา"
          },
          {
            id: "3.2",
            text:"ให้บริการที่เกินความคาดหวังในระดับทั่วไปซึ่งเป็นประโยชน์แก่ผู้รับบริการ แม้ว่าผู้รับบริการจะไม่ได้ถามถึง หรือไม่ทราบมาก่อน"
          },
          {
            id: "3.3",
            text:"เสนอแนวทางและดำเนินการปรับปรุงหรือพัฒนาการให้บริการที่ดีที่สอดคล้องกับความต้องการของผู้รับบริการได้อย่างมีประสิทธิภาพ"
          },
          {
            id: "3.4",
            text:"ปฏิบัติตนเป็นแบบอย่างในการให้บริการที่ดีอย่างสม่ำเสมอ"
          }
        ]
      },
      {
        id: 4,
        title: "ระดับ 4: แสดงความสามารถระดับที่ 3 และสามารถเข้าใจและให้บริการที่ตรงตามความต้องการที่แท้จริงของผู้รับบริการได้ ",
        subItem : [
          {
            id: "4.1",
            text:"1 แสวงหาข้อมูล เป็นที่ปรึกษาและใช้เวลาทำความเข้าใจเกี่ยวกับความจำเป็นหรือความต้องการที่แท้จริงของผู้รับบริการ เพื่อให้ตอบสนองความต้องการที่แท้จริงหรือให้คำแนะนำที่เป็นประโยชน์อย่างแท้จริงกับผู้รับบริการ โดยมุ่งหวังให้ผู้รับบริการมีความมั่นใจและเชื่อถือในคุณภาพและบริการขององค์กร"
          },
          {
            id: "4.2",
            text:"2 เริ่มและพัฒนาวิธีการปฏิบัติงานหรือระบบงาน เพื่อให้เกิดการให้บริการเชิงรุก/ แปลกใหม่ที่รองรับความต้องการของผู้รับบริการทั้งในปัจจุบันและอนาคตได้อย่างเหมาสม"
          },
          {
            id: "4.3",
            text:"ปลูกฝังให้บุคลากรในองค์กรมีจิตสำนึกในการให้บริการที่ดีอย่างสม่ำเสมอ"
          }
        ]
      },
      {
        id: 5,
        title: "ระดับ 5: แสดงความสามารถระดับที่ 4 และสามารถให้บริการที่เป็นประโยชน์อย่างแท้จริงและยั่งยืนให้กับผู้รับบริการ",
        subItem : [
          {
            id: "5.1",
            text:"1 เล็งเห็นผลประโยชน์ที่จะเกิดขึ้นกับผู้รับบริการในระยะยาว และส่งเสริมหรือเปลี่ยนแปลงวิธีหรือขั้นตอนการให้บริการ เพื่อให้ผู้รับบริการได้ประโยชน์สูงสุดอย่างเป็นรูปธรรม"
          },
          {
            id: "5.2",
            text:"ปฏิบัติตนเป็นที่ปรึกษาที่ผู้รับบริการไว้วางใจและสามารถให้ความเห็นส่วนตัวที่อาจแตกต่างไปจากวิธีการ หรือขั้นตอนที่ผู้รับบริการต้องการ เพื่อให้สอดคล้องกับความจำเป็น ปัญหา โอกาส ฯลฯ เพื่อเป็นประโยชน์อย่างแท้จริงหรือในระยะยาวแก่ผู้รับบริการ"
          },
          {
            id: "5.3",
            text:"กำหนดกลยุทธ์ที่จะเพิ่มมาตรฐานในการให้บริการหรือสร้าง/รักษาสัมพันธ์ที่ดีในระยะยาวกับผู้รับบริการได้อย่างมีประสิทธิภาพ"
          }
        ]
      }
    ] 
  },
  {c_id:3,
    c_title:"3.ให้ความสำคัญกับการทำงานเป็นทีม (Teamwork)",
    categories: [
    {
      id: 1,
      title: "ระดับ 1: ทำหน้าที่ของตนในทีมให้สำเร็จ",
      subItem : [
        {
          id: "1.1",
          text:"สนับสนุนการตัดสินใจในกลุ่ม และร่วมมือทำงานในส่วนที่ตนได้รับมอบหมายในทีมให้สำเร็จ"
        },
        {
          id: "1.2",
          text:"เล่ากิจกรรมที่ต้องจัดทำ ความคืบหน้าของการดำเนินงาน หรือข้อมูลอื่นๆ ที่เป็นประโยชน์ให้สมาชิกทุกคนในทีมรับทราบเพื่อประโยชน์ในการทำงานรวมกันอย่างต่อเนื่อง"
        },
        {
          id: "1.3",
          text:"เข้าร่วมกิจกรรมหรือโครงการหรือการประชุมที่เกี่ยวข้องเพื่อให้มีส่วนร่วมในการช่วยเหลือและรับรู้ถึงเป้าหมายและความคืบหน้าของงาน"
        }
      ]
    },
    {
      id: 2,
      title: "ระดับ 2: แสดงความสามารถระดับที่ 1 และให้ความร่วมมือในการทำงานกับเพื่อนร่วมงาน",
      subItem : [
        {
          id: "2.1",
          text:"สร้างสัมพันธ์ เข้ากับผู้อื่นในกลุ่มได้ดี และกล่าวถึงเพื่อนร่วมงานในเชิงสร้างสรรค์"
        },
        {
          id: "2.2",
          text:"ให้ความร่วมมือช่วยเหลือเพื่อนร่วมงานในทีม เพื่อให้การทำงานในทีมประสบความสำเร็จด้วยดีตามที่ได้รับมอบหมายไว้"
        },
        {
          id: "2.3",
          text:"กระตุ้นให้สมาชิกในทีมแลกเปลี่ยนความคิดเห็นและแบ่งปันความรู้หรือข้อมูลที่เป็นความชำนาญของแต่ละบุคคลเพื่อร่วมกันสร้างสรรค์ประโยชน์ต่อองค์กร"
        }
      ]
    },
    {
      id: 3,
      title: "ระดับ 3: แสดงความสามารถระดับที่ 2 และประสานความร่วมมือของสมาชิกในทีม",
      subItem : [
        {
          id: "3.1",
          text:"แสดงความคิดเห็นอย่างเปิดเผยในขณะที่พร้อมรับฟังความเห็นของสมาชิกในทีม และส่งเสริมบรรยากาศของการสนับสนุนเพื่อนำไปสู่ทางเลือกที่เกิดประโยชน์สูงสุดต่อทีมงานและองค์การ"
        },
        {
          id: "3.2",
          text:"สรรหาองค์ความรู้ใหม่ๆ หรือข้อมูลเบื้องลึกมาแบ่งปันกับทีมงานรวมถึงแสดงเต็มใจเรียนรู้จากผู้อื่น รวมถึงผู้ใต้บังคับบัญชา และผู้ร่วมงาน"
        },
        {
          id: "3.3",
          text:"สามารถประสมประสานและประมวลความคิดเห็นต่างๆ ของทีมมาใช้ประกอบการตัดสินใจหรือวางแผนงานร่วมกันในทีม"
        },
        {
          id: "3.4",
          text:"แก้ไขปัญหาหรือความขัดแย้งของสมาชิกในทีม รวมถึงสนับสนุนการทำงานเป็นทีมมากกว่าการแข่งขันกัน"
        }
      ]
    },
    {
      id: 4,
      title: "ระดับ 4: แสดงความสามารถระดับที่ 3 และเต็มใจสนับสนุนและช่วยเหลืองานของสมาชิกในทีมในยามวิกฤติหรือทีมอื่นๆ หรือหน่วยงานอื่นเพื่อให้งานประสบความสำเร็จ",
      subItem : [
        {
          id: "4.1",
          text:" แสดงน้ำใจในเหตุวิกฤติ ให้ความช่วยเหลือแก่เพื่อนร่วมงานที่มีเหตุจำเป็นโดยไม่ต้องให้ร้องขอ"  
        },
        {
          id: "4.2",
          text:"ส่งเสริมบรรยากาศของการมีส่วนร่วมและผูกพันในทีม รวมทั้งพยายามรักษามิตรภาพอันดีกับทีมงานอื่นหรือหน่วยงานอื่นเพื่อช่วยเหลือกันในวาระต่างๆให้งานสำเร็จลุล่วงเป็นประโยชน์ต่อส่วนรวม"
        },
        {
          id: "4.3",
          text:"แสดงออกถึงความเต็มใจและความพร้อมในการสนับสนุนงานของทีมอื่นๆ หรือหน่วยงานอื่นๆ ในยามจำเป็นโดยไม่รีรอเพื่อประโยชน์สูงสุดแก่องค์การ"
        }
      ]
    },
    {
      id: 5,
      title: "ระดับ 5: แสดงความสามารถระดับที่ 4 และสามารถส่งเสริมความสามัคคี เป็นน้ำหนึ่งใจเดียวกันให้องค์การบรรลุผลสำเร็จที่ตั้งไว้",
      subItem : [
        {
          id: "5.1",
          text:"กำหนดกลยุทธ์และทิศทางของทีมให้สอดคล้องกับเป้าหมายขององค์กร"
        },
        {
          id: "5.2",
          text:"ส่งเสริมความสามัคคีเป็นน้ำหนึ่งใจเดียวกัน รวมถึงจุดประกายให้เกิดความเป็นอันหนึ่งอันเดียวกันที่การมุ่งไปสู่ความสำเร็จขององค์กร"
        },
        {
          id: "5.3",
          text:"ให้คำแนะนำ ประสานสัมพันธ์ ส่งเสริมขวัญกำลังใจในการปฏิบัติงานเพื่อรวมพลังกันในการปฏิบัติภารกิจใหญ่น้อยต่างๆให้บรรลุผล"
        }
      ]
    }
    ]
  },
  {c_id:4,
    c_title:"4.มุ่งเน้นบุคลากร (People Focus)",
    categories: [
      {
        id: 1,
        title: "ระดับ 1: มีความสามารถขั้นพื้นฐานตามความต้องการของบริษัท",
        subItem : [
          {
            id: "1.1",
            text:"มีความรู้ ทักษะ ความสามารถขั้นพื้นฐานทั่วไป ที่ตรงตามความต้องการหลักของบริษัทซึ่งกำหนดไว้เพื่อให้สอดคล้องและเป็นประโยชน์กับหน้าที่ความรับผิดชอบหรือตำแหน่งงาน"
          },
          {
            id: "1.2",
            text:"สามารถเรียนรู้งานพื้นฐาน และปฏิบัติงานตามที่ผู้บังคับบัญชามอบหมายได้พอสมควร แต่ต้องได้รับการช่วยเหลือ และให้คำแนะนำจากหัวหน้างาน หรือผู้มีประสบการณ์เป็นระยะๆ"
          },
          {
            id: "1.3",
            text:"สามารถรับผิดชอบงานขั้นพื้นฐานตามที่ผู้บังคับบัญชามอบหมายได้  แต่ต้องได้รับการติดตามและให้คำแนะนำจากหัวหน้างาน เป็นระยะๆ"
          },
          {
            id: "1.4",
            text:"ยังไม่สามารถการแก้ปัญหาหน้างานได้"
          }
        ]
      },
      {
        id: 2,
        title: "ระดับ 2: แสดงความสามารถระดับที่ 1 และสามารถพัฒนาความรู้ และทักษะการทำงานแบบง่ายๆที่ตรงกับความต้องการของหน่วยงาน",
        subItem : [
          {
            id: "2.1",
            text:"มั่นเพิ่มความรู้ และทักษะเติมเต็มงานขั้นพื้นฐานที่รับผิดชอบได้ หรือตามตำแหน่งงาน"
          },
          {
            id: "2.2",
            text:"สามารถเรียนรู้งานพื้นฐาน และปฏิบัติงานตามที่ผู้บังคับบัญชามอบหมายได้ครบถ้วน แต่ยังมีประเด็นที่จะต้องปรับปรุงเล็กน้อย"
          },
          {
            id: "2.3",
            text:"สามารถรับผิดชอบงานขั้นพื้นฐานตามที่ผู้บังคับบัญชามอบหมายได้ โดยไม่ต้องติดตามงาน แต่ยังต้องให้คำแนะนำเพิ่มเติมจากหัวหน้างาน"
          },
          {
            id: "2.4",
            text:"เริ่มมีทักษะแก้ปัญหาหน้างานได้ แต่ยังต้องให้คำแนะนำเพิ่มเติมจากหัวหน้างานและผู้มีประสบการณ์"
          }
        ]
      },
      {
        id: 3,
        title: "ระดับ 3: แสดงความสามารถระดับที่ 2 และสามารถพัฒนาความรู้ และทักษะการทำงานที่ตรงกับความต้องการของหน่วยงาน",
        subItem : [
          {
            id: "3.1",
            text:"พัฒนาความรู้ และทักษะปฏิบัติงานที่รับผิดชอบได้ครบถ้วน หัวหน้างานไม่ต้องติดตาม และไม่ต้องให้คำแนะนำงานประจำที่รับผิดชอบ"
          },
          {
            id: "3.2",
            text:"สามารถรับผิดชอบงานทั้งหมดตามที่ผู้บังคับบัญชามอบหมายได้ โดยไม่ต้องติดตามจากหัวหน้างาน"
          },
          {
            id: "3.3",
            text:"มีทักษะในการแก้ปัญหาหน้างานได้พอสมควร แต่ยังต้องให้คำแนะนำเพิ่มเติมเล็กน้อยจากหัวหน้างาน"
          },
          {
            id: "3.4",
            text:"เริ่มมีความคิดสร้างสรรค์ และข้อเสนอแนะในการปรับปรุงงาน แต่ยังต้องได้รับคำแนะนำจากหัวหน้างาน เพื่อให้ข้อเสนอแนะสามารถนำไปใช้งานได้จริง"
          }
        ]
      },
      {
        id: 4,
        title: "ระดับ 4: แสดงความสามารถระดับที่ 3 และสามารถพัฒนาความรู้ และทักษะการทำงาน รวมทั้งแก้ปัญหางาน และมีความคิดสร้างสรรค์ที่ตรงกับความต้องการของหน่วยงาน",
        subItem : [
          {
            id: "4.1",
            text:"มีประเด็นพัฒนาความรู้ และทักษะปฏิบัติงานมากขึ้นในงานที่รับผิดชอบได้และตรงกับความต้องการของหน่วยงาน"
          },
          {
            id: "4.2",
            text:"สามารถรับผิดชอบงานทั้งหมดตามที่ผู้บังคับบัญชามอบหมายได้ โดยไม่ต้องติดตามจากหัวหน้างาน และสามารถรับผิดชอบบางงานแทนหัวหน้างานได้"
          },
          {
            id: "4.3",
            text:"มีทักษะในการแก้ปัญหาหน้างานได้เป็นอย่างดี และสามารถ ให้คำแนะนำเพื่อนร่วมงานได้"
          },
          {
            id: "4.4",
            text:"มีความคิดสร้างสรรค์ และข้อเสนอแนะในการปรับปรุงงาน สามารถนำไปใช้งานได้จริง"
          }
        ]
      },
      {
        id: 5,
        title: "ระดับ 5: แสดงความสามารถระดับที่ 4 และสามารถพัฒนาความรู้ และทักษะการทำงาน รวมทั้งแก้ปัญหางาน และต่อยอดงานได้",
        subItem : [
          {
            id: "5.1",
            text:"มีการพัฒนาความรู้ และทักษะปฏิบัติงานเพิ่มมากขึ้นอย่างต่อเนื่องในงานที่รับผิดชอบได้และตรงกับความต้องการของหน่วยงาน"
          },
          {
            id: "5.2",
            text:"สามารถรับผิดชอบงานทั้งหมดตามที่ผู้บังคับบัญชามอบหมายได้ และสามารถรับผิดชอบงานทั้งหมดแทนหัวหน้างานได้"
          },
          {
            id: "5.3",
            text:"มีทักษะในการแก้ปัญหาหน้างานได้เป็นอย่างดี และสามารถ ให้คำแนะนำเพื่อนร่วมงานได้ และช่วยงานหัวหน้างานได้เป็นอย่างดี"
          },
          {
            id: "5.4",
            text:"มีความคิดสร้างสรรค์ และข้อเสนอแนะในการปรับปรุงงานทั้งงานในหน่วยงานตนเอง และหน่วยงานอื่น รวมทั้งสามารถกำหนดวิธีการทำงานใหม่ๆในการทำงานได้อย่างเป็นระบบ และได้รับการยอมรับจากเพื่อนร่วมงานในหน่วยตนเองและหน่วยงานอื่นด้วย"
          }
        ]
      }
    ]
  }
];
  
const Form_3 = ({ onSummaryChange, categoryId = 'all', expectedScore = 5 }) => {
    // สร้าง state สำหรับเก็บคะแนนพฤติกรรม
    const [behaviorScores, setBehaviorScores] = useState({});
    // เตรียมชุดหมวดหมู่ที่จะเรนเดอร์
    const categoriesToRender =
      categoryId === 'all'
        ? behaviorData
        : behaviorData.filter(c => c.c_id === Number(categoryId));

    // ปรับชื่อรายการย่อยให้ใช้งานได้ (รองรับ subItems และ subItem)
    const getItems = (level) => (level.subItems ?? level.subItem ?? []);

    // จัดการคะแนนของหัวข้อพฤติกรรมให้ไม่ต่ำกว่า 1 และไม่เกิน 5
  const handleBehaviorScoreChange = (levelKey, value) => {
    let v = parseInt(value, 10);
    if (Number.isNaN(v)) {
      // อนุญาตให้เป็นค่าว่างชั่วคราวระหว่างพิมพ์
      setBehaviorScores(prev => ({ ...prev, [levelKey]: '' }));
      return;
    }
    if (v < 1) v = 1;
    if (v > 5) v = 5;
    setBehaviorScores(prev => ({ ...prev, [levelKey]: v }));
  };

  // รายงานสรุปของ Behavior ให้พาเรนต์ (ถ้ามี) เมื่อคะแนนเปลี่ยน
  React.useEffect(() => {
    if (typeof onSummaryChange === 'function') {
      const allLevelKeys = categoriesToRender.flatMap(cat =>
        (cat.categories ?? []).map(l => `${cat.c_id}-${l.id}`)
      );
      const values = allLevelKeys
        .map(key => behaviorScores[key])
        .filter(v => v !== '' && v != null && !Number.isNaN(Number(v)));
      const total = categoriesToRender.reduce((sum, cat) => sum + (cat.categories?.length || 0), 0);
      const evaluatedCount = allLevelKeys.filter(key => behaviorScores[key] !== '' && behaviorScores[key] != null).length;
      const avg = values.length ? (values.reduce((a, b) => Number(a) + Number(b), 0) / values.length).toFixed(2) : '0.00';
      onSummaryChange({ evaluatedCount, total, average: avg });
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [behaviorScores]);

    return (
    <div>
     <h2 className="text-2xl font-bold mb-4 text-center text-gray-800 mt-12">
               ส่วนที่ 3 คะแนนความสามารถ (Performance Behavior)
             </h2>
               <div className="overflow-x-auto mb-8">
               <table className="w-full border-collapse text-sm">
                 <thead className="bg-gray-200 font-semibold">
                   <tr>
                     <th className="border border-gray-400 px-3 py-2 text-center">พฤติกรรม</th>
                     <th className="border border-gray-400 px-3 py-2 text-center w-24">คะแนนคาดหวัง</th>
                     <th className="border border-gray-400 px-3 py-2 text-center w-24">คะแนนประเมิน</th>
                     <th className="border border-gray-400 px-3 py-2 text-center w-64">ความคิดเห็น/ข้อเสนอแนะของผู้ถูกประเมิน</th>
                   </tr>
                 </thead>
                 <tbody>
                   {/* เรนเดอร์ทุกหมวด (4 ชุดข้อมูล) พร้อมหัวข้อหมวดและระดับ */}
                   {categoriesToRender.map((cat) => (
                     <React.Fragment key={cat.c_id}>
                       {/* หัวข้อประเภทการประเมินของหมวด */}
                       <tr className="bg-blue-100">
                         <td colSpan="4" className='border border-gray-400 font-bold text-left px-4 py-3'>
                           {cat.c_title}
                         </td>
                       </tr>

                       {/* ระดับของหมวด */}
                       {(cat.categories ?? []).map((level) => {
                         const items = getItems(level);
                         const rowSpan = Math.max(items.length, 1);
                         const levelKey = `${cat.c_id}-${level.id}`;
                         return (
                           <React.Fragment key={level.id}>
                             {items.map((item, idx) => (
                               <tr key={item.id} className="hover:bg-gray-50">
                                 <td className="border border-gray-400 px-3 py-2 text-left align-top">
                                   <div className="flex flex-col">
                                     {/* แสดงหัวข้อหลัก (ระดับ) เฉพาะแถวแรกของกลุ่ม */}
                                     {idx === 0 && (
                                       <div className="font-bold text-gray-800 mb-2">
                                         {level.title}
                                       </div>
                                     )}
                                     <div className="flex">
                                       <span className="font-semibold mr-2 whitespace-nowrap">{item.id}</span>
                                       <span className="text-gray-700">{item.text}</span>
                                     </div>
                                   </div>
                                 </td>
                                 {/* คะแนนแสดงเฉพาะแถวแรกของแต่ละกลุ่ม และ merge cells */}
                                 {idx === 0 ? (
                                   <>
                                     <td 
                                       rowSpan={rowSpan} 
                                       className="border border-gray-400 text-center align-middle font-semibold text-lg"
                                     >
                                       {expectedScore}
                                     </td>
                                     <td 
                                       rowSpan={rowSpan} 
                                       className="border border-gray-400 text-center align-middle"
                                     >
                                       <input 
                                         type="number" 
                                         min="1" 
                                         max="5"
                                         step="1"
                                         inputMode="numeric"
                                         className="w-16 px-2 py-2 border border-gray-300 rounded text-center text-lg font-semibold"
                                         value={behaviorScores[levelKey] ?? ''}
                                         onChange={(e) => handleBehaviorScoreChange(levelKey, e.target.value)}
                                         onBlur={(e) => {
                                           if (!e.target.value || Number(e.target.value) < 1) {
                                             handleBehaviorScoreChange(levelKey, 1);
                                           }
                                         }}
                                         placeholder="1"
                                       />
                                     </td>
                                     <td 
                                       rowSpan={rowSpan} 
                                       className="border border-gray-400 align-top p-2"
                                     >
                                       <textarea 
                                         rows="4"
                                         className="w-full px-2 py-1 border border-gray-300 rounded text-sm resize-none"
                                         placeholder="กรอกความคิดเห็น..."
                                       />
                                     </td>
                                   </>
                                 ) : null}
                               </tr>
                             ))}
                           </React.Fragment>
                         );
                       })}
                     </React.Fragment>
                   ))}
                 </tbody>
               </table>
             </div>
</div>
    );
}

export default Form_3;